{"version":3,"sources":["components/EmployeeBirthday.jsx","features/utils.js","components/BirthdayList.jsx","components/Employee.jsx","components/EmployeesList.jsx","App.js","features/api.js","index.js"],"names":["EmployeeBirthday","prop","employee","birthday","Date","dob","birthdayString","getDate","toLocaleString","month","getFullYear","className","lastName","firstName","proptypes","PropTypes","object","isRequired","alphabet","map","item","toUpperCase","monthNames","sortByLastName","a","b","getItemsFromLocalStorage","key","defaultValue","localStorage","getItem","JSON","parse","BirthdayList","sortedSelectedEmployees","obj","employeesBirthdayMonthes","Object","keys","sort","previousMonthes","filter","postMonthes","reduce","acc","sortByMonth","selectedEmployees","length","entries","idx","items","id","Employee","addEmployee","removeEmployee","useState","active","setActive","useEffect","setItem","removeItem","type","name","value","checked","onChange","htmlFor","func","EmployeesList","employees","addSelectedEmployee","removeSelectedEmployee","letter","App","setEmployees","setSelectedEmployees","loading","setLoading","axios","get","then","employeesArr","data","firstLetter","slice","push","orderedValues","getSortedEmployees","catch","err","Error","getMonth","stringify","arr","sortSelectedEmployees","updatedEmployees","newObj","forEach","removeEmptyKeys","ReactDOM","render","StrictMode","path","to","document","getElementById"],"mappings":"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","file":"static/js/main.140d0fb0.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const EmployeeBirthday = (prop) => {\n  const { employee } = prop;\n  const birthday = new Date(employee.dob);\n  const birthdayString = `${birthday.getDate()} ${birthday.toLocaleString(\"en-GB\", {\n    month: \"long\"\n  })}, ${birthday.getFullYear()} year`;\n\n  return (\n    <li className=\"employees-birthday__list-item\">\n      {employee.lastName} {employee.firstName} - {birthdayString}\n    </li>\n  );\n};\n\nEmployeeBirthday.proptypes = {\n  employee: PropTypes.object.isRequired\n};\n","export const alphabet = [\n  \"a\",\n  \"b\",\n  \"c\",\n  \"d\",\n  \"e\",\n  \"f\",\n  \"g\",\n  \"h\",\n  \"i\",\n  \"j\",\n  \"k\",\n  \"l\",\n  \"m\",\n  \"n\",\n  \"o\",\n  \"p\",\n  \"q\",\n  \"r\",\n  \"s\",\n  \"t\",\n  \"u\",\n  \"v\",\n  \"w\",\n  \"x\",\n  \"y\",\n  \"z\"\n].map((item) => item.toUpperCase());\n\nconst monthNames = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\"\n];\n\nexport const sortByLastName = (a, b) => {\n  if (a.lastName > b.lastName) {\n    return 1;\n  }\n  if (a.lastName < b.lastName) {\n    return -1;\n  }\n  return 0;\n};\n\nexport const getItemsFromLocalStorage = (key, defaultValue = {}) => {\n  return localStorage.getItem(key) ? JSON.parse(localStorage.getItem(key)) : defaultValue;\n};\n\nexport const removeEmptyKeys = (obj) => {\n  const newObj = {};\n  Object.keys(obj).forEach((key) => {\n    if (obj[key].length) {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n};\n\nexport const sortByMonth = (obj) => {\n  const MAY_MONTH = 4;\n  const employeesBirthdayMonthes = Object.keys(obj).sort((a, b) => a - b);\n  const previousMonthes = employeesBirthdayMonthes.filter((month) => +month < +MAY_MONTH);\n  const postMonthes = employeesBirthdayMonthes.filter((month) => +month >= +MAY_MONTH);\n\n  const result = [...postMonthes, ...previousMonthes].reduce((acc, item) => {\n    const month = monthNames[item];\n    acc[month] = obj[item] || [];\n\n    return acc;\n  }, {});\n  return result;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { EmployeeBirthday } from \"./EmployeeBirthday\";\n\nimport { sortByMonth } from \"../features/utils\";\n\nexport const BirthdayList = (prop) => {\n  const { selectedEmployees } = prop;\n  const sortedSelectedEmployees = sortByMonth(selectedEmployees);\n  return (\n    <section className=\"emloyees-birhday\">\n      <h2 className=\"emloyees-birhday__title\">Employees birthday</h2>\n      <div className=\"employees-birthday__wrapper\">\n        {Object.keys(sortedSelectedEmployees).length > 0 ? (\n          Object.entries(sortedSelectedEmployees).map((employee, idx) => {\n            const [month, items] = employee;\n            return (\n              <section key={idx}>\n                {sortedSelectedEmployees[month].length > 0 && <h4>{month}</h4>}\n                <ul className=\"employees-birthday__list\">\n                  {items &&\n                    items.map((item) => (\n                      <EmployeeBirthday employee={item} key={`${item.id}-${idx}`} />\n                    ))}\n                </ul>\n              </section>\n            );\n          })\n        ) : (\n          <h3>Employees List is empty</h3>\n        )}\n      </div>\n    </section>\n  );\n};\n\nBirthdayList.proptypes = {\n  selectedEmployees: PropTypes.object.isRequired\n};\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { getItemsFromLocalStorage } from \"../features/utils\";\n\nexport const Employee = (prop) => {\n  const { employee, addEmployee, removeEmployee } = prop;\n  const [active, setActive] = useState(getItemsFromLocalStorage(employee.id, false));\n\n  useEffect(() => {\n    if (active) {\n      localStorage.setItem(employee.id, true);\n    } else {\n      localStorage.removeItem(employee.id);\n    }\n  }, [active]);\n\n  return (\n    <div className=\"employee-content\">\n      <h4 className={`employee-name ${active ? \"active\" : \"\"}`}>\n        {employee.lastName} {employee.firstName}\n      </h4>\n      <div className=\"btn-group\">\n        <div className=\"not-active-wrapper\">\n          <input\n            type=\"radio\"\n            name={employee.firstName}\n            id={`${employee.id}-not-active`}\n            value={false}\n            checked={!active}\n            onChange={() => {\n              setActive(false);\n              removeEmployee(employee);\n            }}\n          />\n          <label htmlFor={`${employee.id}-not-active`}>not active</label>\n        </div>\n        <div className=\"active-wrapper\">\n          <input\n            type=\"radio\"\n            name={employee.firstName}\n            id={`${employee.id}-active`}\n            value={true}\n            checked={active}\n            onChange={() => {\n              setActive(true);\n              addEmployee(employee);\n            }}\n          />\n          <label htmlFor={`${employee.id}-active`}>active</label>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nEmployee.proptypes = {\n  employee: PropTypes.object.isRequired,\n  addEmployee: PropTypes.func.isRequired,\n  removeEmployee: PropTypes.func.isRequired\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Employee } from \"./Employee\";\n\nexport const EmployeesList = (prop) => {\n  const { employees, addSelectedEmployee, removeSelectedEmployee } = prop;\n  return (\n    <section className=\"employees\">\n      <h2 className=\"employees-title\">Employees</h2>\n      <div className=\"employees-wrapper\">\n        {Object.entries(employees).map((employee, idx) => {\n          const [letter, items] = employee;\n          return (\n            <div key={idx} className=\"employee-wrapper\">\n              <h3>{letter}</h3>\n              {items.length > 0\n                ? items.map((item) => (\n                    <Employee\n                      key={item.id}\n                      employee={item}\n                      addEmployee={addSelectedEmployee}\n                      removeEmployee={removeSelectedEmployee}\n                    />\n                  ))\n                : \"----\"}\n            </div>\n          );\n        })}\n      </div>\n    </section>\n  );\n};\n\nEmployeesList.proptypes = {\n  employees: PropTypes.object.isRequired,\n  addSelectedEmployee: PropTypes.func.isRequired,\n  removeSelectedEmployee: PropTypes.func.isRequired\n};\n","import React, { useEffect, useState } from \"react\";\nimport { BirthdayList } from \"./components/BirthdayList\";\nimport { EmployeesList } from \"./components/EmployeesList\";\n\nimport {\n  alphabet,\n  sortByLastName,\n  getItemsFromLocalStorage,\n  removeEmptyKeys\n} from \"./features/utils\";\nimport { getEmployees } from \"./features/api\";\n\nfunction App() {\n  const [employees, setEmployees] = useState({});\n  const [selectedEmployees, setSelectedEmployees] = useState(\n    getItemsFromLocalStorage(\"selectedEmployees\")\n  );\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    setLoading(true);\n    getEmployees()\n      .then(({ data }) => {\n        const employeesArr = data.reduce((acc, item) => {\n          const firstLetter = item.lastName.slice(0, 1);\n          if (acc[firstLetter]) {\n            acc[firstLetter].push(item);\n          } else {\n            acc[firstLetter] = [item];\n          }\n          return acc;\n        }, {});\n        setEmployees(getSortedEmployees(employeesArr));\n        setLoading(false);\n      })\n      .catch((err) => {\n        throw new Error(err);\n      });\n  }, []);\n\n  function getSortedEmployees(employees) {\n    const orderedValues = Object.entries(employees).reduce((acc, item) => {\n      const values = item[1];\n      values.sort(sortByLastName);\n      return acc;\n    }, employees);\n\n    const result = alphabet.sort().reduce((acc, item) => {\n      acc[item] = orderedValues[item] || [];\n      return acc;\n    }, {});\n\n    return result;\n  }\n\n  function sortSelectedEmployees(arr, employee) {\n    const newArr = [...arr, employee];\n    return newArr.sort(sortByLastName);\n  }\n\n  function addSelectedEmployee(employee) {\n    const month = new Date(employee.dob).getMonth();\n    const selectedEmployees = getItemsFromLocalStorage(\"selectedEmployees\");\n    if (selectedEmployees[month]) {\n      localStorage.setItem(\n        \"selectedEmployees\",\n        JSON.stringify({\n          ...selectedEmployees,\n          [month]: sortSelectedEmployees(selectedEmployees[month], employee)\n        })\n      );\n    } else {\n      localStorage.setItem(\n        \"selectedEmployees\",\n        JSON.stringify({\n          ...selectedEmployees,\n          [month]: [employee]\n        })\n      );\n    }\n    setSelectedEmployees(getItemsFromLocalStorage(\"selectedEmployees\"));\n  }\n\n  function removeSelectedEmployee(employee) {\n    const month = new Date(employee.dob).getMonth();\n    const selectedEmployees = getItemsFromLocalStorage(\"selectedEmployees\");\n    const updatedEmployees = {\n      ...selectedEmployees,\n      [month]: selectedEmployees[month].filter((item) => item.id !== employee.id)\n    };\n    localStorage.setItem(\"selectedEmployees\", JSON.stringify(removeEmptyKeys(updatedEmployees)));\n    setSelectedEmployees(getItemsFromLocalStorage(\"selectedEmployees\"));\n  }\n\n  return (\n    <div className=\"app\">\n      {loading ? (\n        <h3>Loading...</h3>\n      ) : (\n        <>\n          <EmployeesList\n            employees={employees}\n            addSelectedEmployee={addSelectedEmployee}\n            removeSelectedEmployee={removeSelectedEmployee}\n          />\n          <BirthdayList selectedEmployees={selectedEmployees} />\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import axios from \"axios\";\n\nconst URL = `https://yalantis-react-school-api.yalantis.com/api/task0/users`;\nexport const getEmployees = () => axios.get(URL);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router, Route, Redirect } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <Route path=\"/employees\">\n        <App />\n      </Route>\n      <Redirect to=\"/employees\" />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}